Aline <- ggplot(Amax.PIM, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)+
#scale_x_continuous("weeks", breaks=seq(1,18,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
#facet_wrap(~species)
Aline
Aline <- ggplot(Amax.PIM, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)
#scale_x_continuous("weeks", breaks=seq(1,18,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
#facet_wrap(~species)
Aline
View(Amax.PIM)
str(Amax)
Amax$trt <- as.factor(Amax$trt)
levels(Amax$trt)
Amax$species <- as.factor(Amax$species)
levels(Amax$species)
#Amax$week <- as.factor(Amax$week)
#levels(Amax$week)
head(Amax)
Amax.PIM <- Amax %>%
filter(species=="PIM")
Aline <- ggplot(Amax.PIM, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)
#scale_x_continuous("weeks", breaks=seq(1,18,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
#facet_wrap(~species)
Aline
str(Amax)
Amax$trt <- as.factor(Amax$trt)
levels(Amax$trt)
Amax$species <- as.factor(Amax$species)
levels(Amax$species)
Amax$Amax <- as.numeric(Amax$Amax)
#levels(Amax$week)
View(Amax)
str(Amax)
head(Amax)
Amax.PIM <- Amax %>%
filter(species=="PIM")
Aline <- ggplot(Amax.PIM, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)
#scale_x_continuous("weeks", breaks=seq(1,18,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
#facet_wrap(~species)
Aline
Aline <- ggplot(Amax.PIM, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)
#scale_x_continuous("weeks", breaks=seq(1,18,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline
Aline <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)
#scale_x_continuous("weeks", breaks=seq(1,18,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline
Aline <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)+
#scale_x_continuous("weeks", breaks=seq(1,18,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline
Aline <- ggplot(Amax.PIM, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)
#scale_x_continuous("weeks", breaks=seq(1,18,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline
Aline <- ggplot(Amax.PIM, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)
scale_x_continuous("weeks", breaks=seq(1,18,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)
scale_x_continuous("weeks", breaks=seq(1,18,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)+
scale_x_continuous("weeks", breaks=seq(1,18,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline
Aline <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)+
#scale_x_continuous("weeks", breaks=seq(1,18,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline
str(Amax)
Amax$trt <- as.factor(Amax$trt)
levels(Amax$trt)
Amax$species <- as.factor(Amax$species)
levels(Amax$species)
Amax$Amax <- as.numeric(Amax$Amax)
Amax$weeks <- as.factor(Amax$weeks)
str(Amax)
Amax$trt <- as.factor(Amax$trt)
levels(Amax$trt)
Amax$species <- as.factor(Amax$species)
levels(Amax$species)
Amax$Amax <- as.numeric(Amax$Amax)
Amax$week <- as.factor(Amax$week)
str(Amax)
Aline <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
#geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)+
#scale_x_continuous("weeks", breaks=seq(1,19,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline
Aline <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
#geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)+
#scale_x_continuous("weeks", breaks=seq(1,19,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline
Aline <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
#geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax, group=trt),size = 2)+
#scale_x_continuous("weeks", breaks=seq(1,19,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline
Aline <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
#geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax, group=1),size = 2)+
#scale_x_continuous("weeks", breaks=seq(1,19,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline
View(Amax)
View(Amax)
Amax <- read.csv(file.choose())
str(Amax)
Amax$trt <- as.factor(Amax$trt)
levels(Amax$trt)
Amax$species <- as.factor(Amax$species)
levels(Amax$species)
Amax$Amax <- as.numeric(Amax$Amax)
Amax$week <- as.factor(Amax$week)
View(Amax)
Amax <- read.csv(file.choose())
str(Amax)
Amax$trt <- as.factor(Amax$trt)
levels(Amax$trt)
Amax$species <- as.factor(Amax$species)
levels(Amax$species)
#Amax$Amax <- as.numeric(Amax$Amax)
Amax$week <- as.factor(Amax$week)
View(Amax)
install.packages("readxl")
knitr::opts_chunk$set(echo = TRUE)
library("readxl")
Amax <- read_excel(file.choose())
View(Amax)
str(Amax)
Amax$trt <- as.factor(Amax$trt)
levels(Amax$trt)
Amax$species <- as.factor(Amax$species)
levels(Amax$species)
Amax$Amax <- as.numeric(Amax$Amax)
#Amax$week <- as.factor(Amax$week)
View(Amax)
str(Amax)
Aline <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
#geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)+
#scale_x_continuous("weeks", breaks=seq(1,19,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
library(dplyr)
library(ggplot2)
library(ggpubr)
library(rstatix)
library(cowplot)
library(gridExtra)
library(patchwork)
library(tidyverse)
library(report)
library(extrafont)
library(table1)
library(qwraps2)
Aline <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
#geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)+
#scale_x_continuous("weeks", breaks=seq(1,19,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline
Amax$week <- as.factor(Amax$week)
str(Amax)
Aline <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
#geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 2)+
#scale_x_continuous("weeks", breaks=seq(1,19,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline
View(Amax)
Amax <- Amax %>%
group_by(species, week) %>%
summarise(avg=mean(Amax))
Amax
Aline <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
geom_line(aes(x=week, y=avg, group=trt))+
geom_point(aes(x=week, y=avg),size = 2)+
#scale_x_continuous("weeks", breaks=seq(1,19,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
geom_line(aes(x=week, y=avg, group=trt))+
geom_point(aes(x=week, y=avg),size = 2)+
#scale_x_continuous("weeks", breaks=seq(1,19,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline
Aline <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
geom_line(aes(x=week, y=avg))+
geom_point(aes(x=week, y=avg),size = 2)+
#scale_x_continuous("weeks", breaks=seq(1,19,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline
Amax <- Amax %>%
group_by(species, week, trt) %>%
summarise(avg=mean(Amax))
library("readxl")
Amax <- read_excel(file.choose())
str(Amax)
Amax$trt <- as.factor(Amax$trt)
levels(Amax$trt)
Amax$species <- as.factor(Amax$species)
levels(Amax$species)
Amax$Amax <- as.numeric(Amax$Amax)
Amax$week <- as.factor(Amax$week)
str(Amax)
Amax <- Amax %>%
group_by(species, week, trt) %>%
summarise(avg=mean(Amax))
Amax
Aline <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
geom_line(aes(x=week, y=avg, group=trt))+
geom_point(aes(x=week, y=avg),size = 2)+
#scale_x_continuous("weeks", breaks=seq(1,19,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Aline
Apoint <- ggplot(Amax, aes(fill=trt, color=trt)) +
scale_color_manual(values=c("#009E73", "#F0E442", "#D55E00"))+
#geom_line(aes(x=week, y=Amax))+
geom_point(aes(x=week, y=Amax),size = 1)+
#scale_x_continuous("weeks", breaks=seq(1,19,by=2),labels=c("1","3","5","7","9","13","15","17","19"))+
facet_wrap(~species)
Apoint
library(lme4)
library(simr)
library(MASS)
library(dplyr)
library(nlme)
source("functions.R")
ICC <- 0.3
corr <- 0.7
group_size <-10
num_groups <- 50
gamma<-rep(1,9)
sample_data<-generate_data(group_size=10, num_groups=50, ICC=0.3,corr=0.7,gamma=rep(1,9))
source("~/Documents/GitHub/multilevel-centering/functions.R")
sample_data<-generate_data(group_size=10, num_groups=50, ICC=0.3,corr=0.7,gamma=rep(1,9))
conv_check(sample_data)
source("~/Documents/GitHub/multilevel-centering/functions.R")
raw.coef<-read.table("./data/raw_coef.csv", sep = ",", col.names=F)
setwd("~/Documents/GitHub/multilevel-centering")
raw.coef<-read.table("./data/raw_coef.csv", sep = ",", col.names=F)
raw.coef
raw.coef<-read.table("./data/raw_coef.csv", sep = ",")
raw.coef
simulation_run<- function(){
start.time <- Sys.time()
### preparing and saving raw data
raw.data<-generate_data(group_size, num_groups, ICC,corr,gamma)
suppressWarnings(write.table(data.frame(raw.data,row.names = FALSE), "./data/rawdata.csv", sep = ",", col.names = !file.exists("rawdata.csv"), append = T))
### raw model
raw.res<-raw_model(raw.data,gamma)
raw.coef<-raw.res[,1]
suppressWarnings(write.table(data.frame(t(raw.coef),row.names = FALSE), "./data/raw_coef.csv", sep = ",", col.names = !file.exists("raw_coef.csv"), append = T))
raw.se<-raw.res[,2]
suppressWarnings(write.table(data.frame(t(raw.se),row.names = FALSE), "./data/raw_se.csv", sep = ",", col.names = !file.exists("raw_se.csv"), append = T))
### cgm model
cgm.data<-cgm_cent(raw.data)
cgm.res<-cgm_model(cgm.data,gamma)
cgm.coef<-cgm.res[,1]
suppressWarnings(write.table(data.frame(t(cgm.coef),row.names = FALSE), "./data/cgm_coef.csv", sep = ",", col.names = !file.exists("cgm_coef.csv"), append = T))
cgm.se<-cgm.res[,2]
suppressWarnings(write.table(data.frame(t(cgm.se),row.names = FALSE), "./data/cgm_se.csv", sep = ",", col.names = !file.exists("cgm_se.csv"), append = T))
### cwc model
cwc.data<-cwc_cent(raw.data)
cwc.res<-cwc_model(cwc.data,gamma)
cwc.coef<-cwc.res[,1]
suppressWarnings(write.table(data.frame(t(cwc.coef),row.names = FALSE), "./data/cwc_coef.csv", sep = ",", col.names = !file.exists("cwc_coef.csv"), append = T))
cwc.se<-cwc.res[,2]
suppressWarnings(write.table(data.frame(t(cwc.se),row.names = FALSE), "./data/cwc_se.csv", sep = ",", col.names = !file.exists("cwc_se.csv"), append = T))
end.time <- Sys.time()
time.taken <- end.time - start.time
print(paste0("Simulation finished. Time taken: ",round(time.taken,3), "s"))
return(0)
}
replicate(n = 100, simulation_run(),simplify = FALSE)
simulation_run<- function(){
start.time <- Sys.time()
### preparing and saving raw data
raw.data<-generate_data(group_size, num_groups, ICC,corr,gamma)
suppressWarnings(write.table(data.frame(raw.data), "./data/rawdata.csv", sep = ",",row.names = FALSE, col.names = !file.exists("rawdata.csv"), append = T))
### raw model
raw.res<-raw_model(raw.data,gamma)
raw.coef<-raw.res[,1]
suppressWarnings(write.table(data.frame(t(raw.coef)), "./data/raw_coef.csv",row.names = FALSE, sep = ",", col.names = !file.exists("raw_coef.csv"), append = T))
raw.se<-raw.res[,2]
suppressWarnings(write.table(data.frame(t(raw.se)), "./data/raw_se.csv", sep = ",", row.names = FALSE,col.names = !file.exists("raw_se.csv"), append = T))
### cgm model
cgm.data<-cgm_cent(raw.data)
cgm.res<-cgm_model(cgm.data,gamma)
cgm.coef<-cgm.res[,1]
suppressWarnings(write.table(data.frame(t(cgm.coef)), "./data/cgm_coef.csv", sep = ",", row.names = FALSE,col.names = !file.exists("cgm_coef.csv"), append = T))
cgm.se<-cgm.res[,2]
suppressWarnings(write.table(data.frame(t(cgm.se)), "./data/cgm_se.csv", sep = ",",row.names = FALSE, col.names = !file.exists("cgm_se.csv"), append = T))
### cwc model
cwc.data<-cwc_cent(raw.data)
cwc.res<-cwc_model(cwc.data,gamma)
cwc.coef<-cwc.res[,1]
suppressWarnings(write.table(data.frame(t(cwc.coef)), "./data/cwc_coef.csv", sep = ",", row.names = FALSE,col.names = !file.exists("cwc_coef.csv"), append = T))
cwc.se<-cwc.res[,2]
suppressWarnings(write.table(data.frame(t(cwc.se)), "./data/cwc_se.csv", sep = ",",row.names = FALSE, col.names = !file.exists("cwc_se.csv"), append = T))
end.time <- Sys.time()
time.taken <- end.time - start.time
print(paste0("Simulation finished. Time taken: ",round(time.taken,3), "s"))
return(0)
}
replicate(n = 100, simulation_run(),simplify = FALSE)
cwc.res<-cwc_model(cwc.data)
replicate(n = 100, simulation_run(),simplify = FALSE)
simulation_run<- function(){
start.time <- Sys.time()
### preparing and saving raw data
raw.data<-generate_data(group_size, num_groups, ICC,corr,gamma)
suppressWarnings(write.table(data.frame(raw.data), "./data/rawdata.csv", sep = ",",row.names = FALSE, col.names = !file.exists("rawdata.csv"), append = T))
### raw model
raw.res<-raw_model(raw.data)
raw.coef<-raw.res[,1]
suppressWarnings(write.table(data.frame(t(raw.coef)), "./data/raw_coef.csv",row.names = FALSE, sep = ",", col.names = !file.exists("raw_coef.csv"), append = T))
raw.se<-raw.res[,2]
suppressWarnings(write.table(data.frame(t(raw.se)), "./data/raw_se.csv", sep = ",", row.names = FALSE,col.names = !file.exists("raw_se.csv"), append = T))
### cgm model
cgm.data<-cgm_cent(raw.data)
cgm.res<-cgm_model(cgm.data)
cgm.coef<-cgm.res[,1]
suppressWarnings(write.table(data.frame(t(cgm.coef)), "./data/cgm_coef.csv", sep = ",", row.names = FALSE,col.names = !file.exists("cgm_coef.csv"), append = T))
cgm.se<-cgm.res[,2]
suppressWarnings(write.table(data.frame(t(cgm.se)), "./data/cgm_se.csv", sep = ",",row.names = FALSE, col.names = !file.exists("cgm_se.csv"), append = T))
### cwc model
cwc.data<-cwc_cent(raw.data)
cwc.res<-cwc_model(cwc.data)
cwc.coef<-cwc.res[,1]
suppressWarnings(write.table(data.frame(t(cwc.coef)), "./data/cwc_coef.csv", sep = ",", row.names = FALSE,col.names = !file.exists("cwc_coef.csv"), append = T))
cwc.se<-cwc.res[,2]
suppressWarnings(write.table(data.frame(t(cwc.se)), "./data/cwc_se.csv", sep = ",",row.names = FALSE, col.names = !file.exists("cwc_se.csv"), append = T))
end.time <- Sys.time()
time.taken <- end.time - start.time
print(paste0("Simulation finished. Time taken: ",round(time.taken,3), "s"))
return(0)
}
replicate(n = 100, simulation_run(),simplify = FALSE)
raw.coef<-read.table("./data/raw_coef.csv", sep = ",")
raw.coef
View(raw.coef)
simulation_run<- function(){
start.time <- Sys.time()
### preparing and saving raw data
raw.data<-generate_data(group_size, num_groups, ICC,corr,gamma)
suppressWarnings(write.table(data.frame(raw.data), "./data/rawdata.csv", sep = ",",row.names = FALSE, col.names = !file.exists("./data/rawdata.csv"), append = T))
### raw model
raw.res<-raw_model(raw.data)
raw.coef<-raw.res[,1]
suppressWarnings(write.table(data.frame(t(raw.coef)), "./data/raw_coef.csv",row.names = FALSE, sep = ",", col.names = !file.exists("./data/raw_coef.csv"), append = T))
raw.se<-raw.res[,2]
suppressWarnings(write.table(data.frame(t(raw.se)), "./data/raw_se.csv", sep = ",", row.names = FALSE,col.names = !file.exists("./data/raw_se.csv"), append = T))
### cgm model
cgm.data<-cgm_cent(raw.data)
cgm.res<-cgm_model(cgm.data)
cgm.coef<-cgm.res[,1]
suppressWarnings(write.table(data.frame(t(cgm.coef)), "./data/cgm_coef.csv", sep = ",", row.names = FALSE,col.names = !file.exists("./data/cgm_coef.csv"), append = T))
cgm.se<-cgm.res[,2]
suppressWarnings(write.table(data.frame(t(cgm.se)), "./data/cgm_se.csv", sep = ",",row.names = FALSE, col.names = !file.exists("./data/cgm_se.csv"), append = T))
### cwc model
cwc.data<-cwc_cent(raw.data)
cwc.res<-cwc_model(cwc.data)
cwc.coef<-cwc.res[,1]
suppressWarnings(write.table(data.frame(t(cwc.coef)), "./data/cwc_coef.csv", sep = ",", row.names = FALSE,col.names = !file.exists("./data/cwc_coef.csv"), append = T))
cwc.se<-cwc.res[,2]
suppressWarnings(write.table(data.frame(t(cwc.se)), "./data/cwc_se.csv", sep = ",",row.names = FALSE, col.names = !file.exists("./data/cwc_se.csv"), append = T))
end.time <- Sys.time()
time.taken <- end.time - start.time
print(paste0("Simulation finished. Time taken: ",round(time.taken,3), "s"))
return(0)
}
replicate(n = 100, simulation_run(),simplify = FALSE)
raw.coef<-read.table("./data/raw_coef.csv", sep = ",")
View(raw.coef)
raw.coef<-read.table("./data/raw_coef.csv", sep = ",",names=T)
raw.coef<-read.table("./data/raw_coef.csv", sep = ",", col.names = T)
View(raw.coef)
raw.coef<-read.table("./data/raw_coef.csv", sep = ",", header = T)
View(raw.coef)
raw.data<-read.table("./data/raw_data.csv", sep = ",", header = T)
raw.data<-read.table("./data/rawdata.csv", sep = ",", header = T)
View(raw.data)
raw.coef
apply(raw.coef, 1, function(x) x-1)
View(raw.coef)
source("~/Documents/GitHub/multilevel-centering/functions.R")
coef.bias<-apply(raw.coef, 1, function(x) x-1)
coef.bias
View(coef.bias)
coef.bias<-apply(raw.coef, 1, function(x) mean(x-1))
coef.bias<-apply(raw.coef, 1, function(x) x-1)
coef.bias<-apply(apply(raw.coef, 1, function(x) x-1),2,function(x) mean(x))
coef.bias<-apply(raw.coef, 1, function(x) x-1)
apply(coef.bias,2,function(x) mean(x))
apply(coef.bias,1,function(x) mean(x))
coef.bias<-apply(apply(raw.coef, 1, function(x) x-1),1,function(x) mean(x))
coef.bias
raw.coef<-read.table("./data/raw_coef.csv", sep = ",", header = T)
apply(raw.coef, 1, function(x) x-rep(1,9))
View(raw.coef)
get_coef_bias<-function(res,gamma){
bias<-apply(apply(res, 1, function(x) x-gamma),1,function(x) mean(x))
return(bias)
}
coef.bias<-get_coef_bias(raw.data,gamma)
coef.bias
warnings()
gamma<-rep(1,9)
coef.bias<-get_coef_bias(raw.data,gamma)
coef.bias<-apply(apply(res, 1, function(x) x-rep(1,9)),1,function(x) mean(x))
coef.bias<-apply(apply(raw.data, 1, function(x) x-rep(1,9)),1,function(x) mean(x))
coef.bias<-apply(raw.data, 1, function(x) x-rep(1,9))
coef.bias<-get_coef_bias(raw.coef,gamma)
coef.bias
source("~/Documents/GitHub/multilevel-centering/functions.R")
coef.bias<-get_coef_bias(raw.coef,gamma)
coef.bias<-apply(coef.bias,1,function(x) mean(x)) # getting avg bias
get_mse<-function(res,gamma){
mse<-apply(apply(res, 1, function(x) (x-gamma)^2),1,function(x) mean(x))
return(mse)
}
get_coef_bias<-function(res,gamma){
bias<-apply(apply(res, 1, function(x) x-gamma),1,function(x) mean(x))
return(bias)
}
coef.mse<-get_coef_mse(raw.coef,gamma) # getting avg mse
get_coef_mse<-function(res,gamma){
mse<-apply(apply(res, 1, function(x) (x-gamma)^2),1,function(x) mean(x))
return(mse)
}
coef.mse<-get_coef_mse(raw.coef,gamma) # getting avg mse
coef.mse
names(raw.coef)
raw.coef["x1"]
cgm.coef<-read.table("./data/cgm_coef.csv", sep = ",", header = T)
cgm.coef["x1"]-raw.coef["x1"]
cgm.coef["x1"]
cgm.coef
cgm.coef["x1.cgm"]-raw.coef["x1"]
(cgm.coef["x1.cgm"]-raw.coef["x1"])/raw.coef["x1"]
cgm_cent<-function(data1){
data1$x1<-data1$x1-mean(data1$x1)
data1$x2<-data1$x2-mean(data1$x2)
data1$g1<-data1$g1-mean(data1$g1)
data1$g2<-data1$g2-mean(data1$g2)
return(data1)
}
cwc_cent<-function(data1){
data_cwc<-data1 %>%
group_by(g_id) %>%
mutate(x1 = x1-mean(x1), x2 = x2-mean(x2))
return(data_cwc)
}
source("~/Documents/GitHub/multilevel-centering/functions.R")
get_rel_change<-function(raw, cent.data){
for (param in names(raw)){
rel.change[param]<-(cent.data[param]-raw[param])/raw[param]
}
return(rel.change)
}
source("~/Documents/GitHub/multilevel-centering/functions.R")
